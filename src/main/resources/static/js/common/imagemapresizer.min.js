(function(){"use strict";function e(e){return function t(){function n(){function e(e,n){function a(e){var n=1===(i=1-i)?"width":"height";return Math.floor(Number(e)*t[n])}var i=0;l[n].coords=e.split(",").map(a).join(",")}var t={width:p.width/s.naturalWidth,height:p.height/s.naturalHeight};d.forEach(e)}function a(e){return e.coords.replace(/ *, */g,",").replace(/ +/g,",")}function i(){clearTimeout(h);h=setTimeout(n,250)}function r(){if(p.width!==s.naturalWidth||p.height!==s.naturalHeight){n()}}function o(){s.addEventListener("load",n,false);window.addEventListener("focus",n,false);window.addEventListener("resize",i,false);window.addEventListener("readystatechange",n,false);document.addEventListener("fullscreenchange",n,false)}function u(){return"function"===typeof f._resize}function c(){l=f.getElementsByTagName("area");d=Array.prototype.map.call(l,a);s=document.querySelector('img[usemap="#'+f.name+'"]');var t=e/s.naturalHeight;p.width=s.naturalWidth*t;p.height=s.naturalHeight*t;f._resize=n}var f=this,l=null,d=null,s=null,h=null,p={};if(!u()){c();o();r()}else{f._resize()}}}function t(){function e(e){if(!e.tagName){throw new TypeError("Object is not a valid DOM element")}else if("MAP"!==e.tagName.toUpperCase()){throw new TypeError("Expected <MAP> tag, found <"+e.tagName+">.")}}function t(t){if(t){e(t);scaleImageMap.call(t);n.push(t)}}var n;return function e(a){n=[];switch(typeof a){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(a||"map"),t);break;case"object":t(a);break;default:throw new TypeError("Unexpected data type ("+typeof a+").")}return n}}if(typeof define==="function"&&define.amd){define([],t)}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=t()}else{window.imageMapResize=t()}if("jQuery"in window){jQuery.fn.imageMapResize=function t(n){return this.filter("map").each(e(n)).end()}}})();